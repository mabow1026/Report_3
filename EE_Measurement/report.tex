\documentclass[11pt,dvipdfmx]{jarticle}

\usepackage{eee}
\usepackage{subfig}
\usepackage{here}
\renewcommand{\labelenumi}{\alph{enumi}}
\renewcommand{\labelenumii}{\roman{enumii}}
\newcounter{mycounter} % カウンタの宣言
\setcounter{mycounter}{0} % カウンタの初期化
\newcommand{\useMycounter}[1][]{\refstepcounter{mycounter}{#1}プログラム{\themycounter}: }

\begin{document}
% トップページを書く
\begin{jikkenTitle}
	\gakunen{3} % 学年を記述。この行で全体の枠を表示
	\numTitle{1}{電気電子計測} % 実験番号、タイトルを記述
	\subTitle{} % サブタイトルがあれば記述
	\jikkenbi{令和4年6月3日(木)} % 実験日を記述
	\jikkenbiII{令和4年6月10日(木)} % 実験日を記述(二日目がある場合。ない場合はこの行をコメントアウト)
	\kyoudou{} % 共同実験者名を記述
	\kyoudouII{} % その他の共同実験者名を記述
	\yoteibi{/ 　}% 予定日を記述
	\yoteibiII{}% 予定日2を記述
	\yoteibiIII{}% 予定日3を記述
	\hanNumberName{}{3333}{宮崎 永} % 班番号・学生番号・氏名を記述。この行でタイトルページの描画を終了
\end{jikkenTitle}

\section{目的}
本実験では
\begin{itemize}
	\item LabVIEWとMyRIOを使用して、素子の電圧電流特性について自動計測の方法を習得する。
	\item 測定データから近似直線式の傾き、切片を求める計算方法を習得する。
	\item 電圧電流特性から抵抗値を求める方法について習得する。
\end{itemize}
ことを目的とする。

\section{原理}
\subsection{LabVIEW}
LabVIEWは、各種計測器やmyRIOなどを用いて自動計測や制御を実装するためのグラフィカルユーザーインターフェイスのプログラミング言語である。
主な特徴は、ビルトインされた仮想計測器（以下VI）で、オシロスコープやマルチメーターなどの計測器と似た外観や機能をコンピューター上へ作成するというものである。
VIは、フロントパネル、ブロックダイアグラム、アイコン-コネクタという３つ主要素から構成される。
プログラミングは、ブロックダイアグラム上にアイコンを配置し、各アイコン間のコネクタをつなぐ形で行う。

\subsection{myRIO}
myRIOは、デュアルコアのARM Cortex-A9 リアルプロセッサとカスタマイズ可能なXilinx FPGA・アナログプロセッサの駆動するプログラミング言語には、LabVIEWを用いる。
LabVIEWとmyRIOを用いることにより、制御、ロボット、メカトロニクス、組込などを容易に実現することができる。

\subsection{myRIO　ブレッドボードアクセサリ}
myRIOの拡張ポートに接続可能なブレッドボードアクセサリである。
myRIOの5V、3.3V、GND端子及びAnalog I/O、Digital I/Oの端子が、ブレッドボード上に結線した回路とヘッダにマッピングされている。
そのため、ブレッドボード上に結線した回路とヘッダとをジャンパ戦で結線することにより、回路への入出力制御および計測がmyRIOを用いて容易に実行することができる。

\subsection{真値と誤差及び相対誤差（誤差率）}
\subsubsection{真値}
真値とは、測定量(測定値ではない)が単位の何倍であるのかを示している値である。
真値は必ず存在すると仮定しても我々は真値そのものは知ることができず、ただその存在する範囲を推定することが出来るだけである。

\subsubsection{誤差及び相対誤差}
誤差は\weq{gosa}で定義される。
\begin{eqnarray}
	誤差 = 測定値 − 真値
	\label{eq:gosa}
\end{eqnarray}
また、相対誤差とは真値に対する誤差の比である。
但し真値は分からないので、通常は\weq{soutaigosa}のように誤差が小さいとして真値の代わりに測定値で割る。
\begin{eqnarray}
	相対誤差 = \frac{誤差}{真値} \simeq \frac{誤差}{測定値}
	\label{eq:soutaigosa}
\end{eqnarray}

\subsection{統計処理（正規分布・平均値・標準偏差）}
\subsubsection{正規分布}
左右対称の釣鐘型に値が分布しているのを正規分布といい、山の頂点に平均値がくる。

\subsubsection{平均値}
平均値とは$N$個全てのデータの総和を$N$個で割って得られる値で、\weq{heikinchi}で表すことができる。
\begin{equation}
	\bar{y} = \frac{1}{N}\sum^N_{i = 1}y_i
	\label{eq:heikinchi}
\end{equation}

\subsubsection{標準偏差}
標準偏差とは平均値を基準に各測定量がどれほどのばらついているかを定量的に表す値で、\weq{hyoujunhensa}で表すことができる。
\begin{equation}
	\sigma = \sqrt{\frac{1}{N - 1}\sum^N_{i = 1}(y_i - \bar{y})^2}
	\label{eq:hyoujunhensa}
\end{equation}

\subsection{近似直線（最小二乗法）}
%。
2つの測定データ$y, x$間に一次方程式の関係があるとし、
\begin{equation}
	y = ax + b
	\label{eq:aiu}
\end{equation}
の傾き$a$、切片$b$を測定データから尤もらしい値にすることを考える。
その際に、
\begin{eqnarray}
	E &=& \sum\limits_{i=1}^{N} \varepsilon^2_i \nonumber\\
	&=& \sum\limits_{i=1}^{N} \bigl( y_i - f(x_i)\bigr)^2\nonumber\\\
	&=& \sum\limits_{i=1}^{N} \bigl( y_i - (ax_i+b)\bigr)^2
	\label{eq:error}
\end{eqnarray}
を最小にする$a$、$b$を求める。
これを最小二乗法といい、誤差を伴う測定値の処理においてその誤差の二乗の和を最小にすることで、最も確からしい関係式を求める方法である。
\begin{eqnarray}
	\frac{\partial}{\partial a}E(a,b) &=& 0\\
	\frac{\partial}{\partial b}E(a,b) &=& 0
\end{eqnarray}
から得られる方程式を、それぞれ$a$、$b$について解けば良く、それぞれの解を得るための方程式は次の2つを用いることになる。
\begin{equation}
	a = \frac{\sum_{n=1}^{n}(x_i -\bar{x})(y_i-\bar{y})}{\sum_{n=1}^{n}(x_i-\bar{x})^2}
	\label{eq:saisyou1}
\end{equation}
\begin{equation}
	b = \bar{y}-\frac{\sum_{n=1}^{n}(x_i -\bar{x})(y_i-\bar{y})}{\sum_{n=1}^{n}(x_i-\bar{x})^2} \bar{x}
	\label{eq:saisyou2}
\end{equation}

\section{方法}
\subsection{使用器具}
今回の実験で使用した器具を表\ref{tab:使用器具}に示す。
\begin{table}[htbp]
	\caption{使用器具}
	\begin{tabular}{cccc}
		\hline
		機器名                            & 製造元                  & 型番           & 固有番号                \\ \hline \hline
		PC                             & iiyama               & NK50SZ       & NKNK50SZ0000K000388 \\	\hline
		LabVIEW                        & National Instruments & ver19.0.1f3  &                     \\	\hline
		myRIO                          & National Instruments & myRIO-1900   & 309C570             \\ \hline
		NI myRIO Starter Accessory Kit & DIGILENT             & 6002-240-000 &                     \\ \hline
	\end{tabular}
	\label{tab:使用器具}
\end{table}

\subsection{実験手順}
\subsubsection{文字列および数値の入力・表示}
\begin{enumerate}[1)]
	\item	フロントパネルに数値制御器と数値表示器のブロックを作成した。
	\item 数値表示器と数値表示器をワイヤーで接続した。
	\item 数値制御器に任意の数値を入力した。
	\item 数値制御機に入力した数値が数値表示器に表示されていることを確認した。
\end{enumerate}

\subsubsection{数値計算(演算子・制御表示器作成・ワイヤ分岐・ブロック置換)}
\subsubsection*{足し算の作成}
\begin{enumerate}[1)]
	\item	フロントパネルに数値制御器ブロック2つと数値表示器ブロックを作成した。
	\item ブロックダイヤグラム上に和ブロックを配置した。
	\item 2の数値制御器を和ブロックの入力に、数値表示器の入力を和ブロックの出力にワイヤーで接続した。
	\item 2つの数値制御器に数値を入力し、数値表示器に二つの数字の和が表示されていることを確認した。
\end{enumerate}

\subsubsection*{コネクタを使用した足し算の作成}
\begin{enumerate}[1)]
	\item 和ブロックを配置した。
	\item 和ブロックのxコネクタを右クリックし、プルダウンメニューの作成から制御器を選択した。
	\item 同様に、yのコネクタを右クリックし制御器を配置し、x+yコネクタを右クリックし、表示器を配置した。
	\item 2つの制御器に数値を入力し、数値表示器に二つの数字の和が表示されていることを確認した。
\end{enumerate}

\subsubsection*{ワイヤ分岐による掛け算の作成}
\begin{enumerate}[1)]
	\item これまで作成したプログラムはそのままに、ブロックダイヤグラム上に積ブロックを配置した。
	\item 積ブロックのxコネクタと数値制御器xから出ているワイヤを接続した。
	\item 積ブロックのyコネクタと数値制御器yから出ているワイヤを接続した。
	\item 積ブロック右側のx*yコネクタを右クリックし、プルダウンメニューの作成から表示器を選択した。
	\item 制御器の数値を変えたときでも、表示器に表示される値が正しいことを確認した。
\end{enumerate}

\subsubsection*{引き算・割り算の作成(ブロックの置換)}
\begin{enumerate}[1)]
	\item 和ブロックを右クリックし、プルダウンメニューの置換から数値パレットで差を選択した。また、差ブロックの表示器の名前をx-yに変更した。
	\item 同様に、積ブロックを右クリックし、プルダウンメニューの置換から数値パレットで商を選択した。また、差ブロックの表示器の名前のx/yに変更した。
	\item	プログラムを実行し、それぞれの表示器に正しい値を表示されていることを確認した。
\end{enumerate}

\subsubsection{forループの作成}
\begin{enumerate}[1)]
	\item ブロックダイヤグラム上にforループブロックを作成した。
	\item 繰り返し回数Nブロックに繰り返し回数の定数を設定した。
	\item 和、数値制御器、数値制御器をforループ内に1つづつ用意した。
	\item 和ブロックのコネクタxとカウンタ変数iのブロックと繋いだ。
	\item プログラムを実行し、表示器の値を確認する。
	\item メニューバーの電球アイコンを選択し、カウンタ変数iの値が変化しながら実行されることを確認した。
	\item 数値制御器yのブロックをforループの外に配置した時の動作も確認した。
\end{enumerate}

\subsubsection{実験2-1:アナログ電圧値の計測}
\begin{enumerate}[1)]
	\item ジャンパ線を用いて、ブレッドボードに図\ref{fig:jikken1}に示す配線をした。
	      \begin{figure}[H]
		      \centering
		      \includegraphics[keepaspectratio, scale=1.0]{jikken1.pdf}
		      \caption{電圧値計測実験の配線図}
		      \label{fig:jikken1}
	      \end{figure}
	\item myRIOのAポートにブレッドボードを差し込み、次のように実験を行った。
	\item forループなどを用いて、AIO端子の電圧を100回測定できるようなプログラムをLabVIEWを用いて作成し、5V, 3.3V. GNDの出力電圧をそれぞれ計測した。また、電圧の切り替えはジャンパ線の接続先を変えることによって行った。
	\item 出力電圧が$0\,\mathrm{V}$から$5\,\mathrm{V}$まで$0.2\,\mathrm{V}$刻みで変化するようにプログラムを変更した。
	\item 測定したデータからexcelを用いて平均値と標準偏差を求めた。
\end{enumerate}

\subsubsection{実験2-2:電圧の出力}
\begin{enumerate}[1)]
	\item ジャンパ線を用いて、ブレッドボードに図\ref{fig:jikken2}に示す配線をした。
	      \begin{figure}[H]
		      \centering
		      \includegraphics[keepaspectratio, scale=1.0]{jikken2.pdf}
		      \caption{電圧の出力実験の配線図}
		      \label{fig:jikken2}
	      \end{figure}
	\item myRIOのAポートにブレッドボードを差し込み、次のように実験を行った。
	\item $0\,\mathrm{V}$から$5\,\mathrm{V}$まで0.05秒ごとに$0.5\,\mathrm{V}$刻みで出力電圧を変化させ、その電圧をAIO端子で測定するプログラムをLabVIEWを用いて作成し、実行した。
	\item	測定したデータから、Excelを用いて二乗平均平方根誤差を求めた。
\end{enumerate}

\subsubsection{実験3:素子の電圧電流特性の計測}
固定抵抗、可変抵抗、Cdsセンサ、力センサ、発光ダイオードにおいて電圧電流特性の計測を行った。
すべての素子において実験手順は同様であり、次に示す。
\begin{enumerate}[1)]
	\item ジャンパ線を用いて、ブレッドボードに図\ref{fig:jikken3}に示す配線をした。$R_0$は電流計測用のシャント抵抗、$R_{\mathrm{X}}$は計測対象の素子である。
	      \begin{figure}[H]
		      \centering
		      \includegraphics[keepaspectratio, scale=1.0]{jikken3.pdf}
		      \caption{電圧の出力実験の配線図}
		      \label{fig:jikken3}
	      \end{figure}
	\item myRIOのAポートにブレッドボードを差し込んだ。
	\item $0\,\mathrm{V}$から$5\,\mathrm{V}$まで0.05秒ごとに$0.5\,\mathrm{V}$刻みで出力電圧AO0を変化させ、AI0とAI1それぞれの端子の電圧を測定するプログラムをLabVIEWを用いて作成し、実行した。
	\item	測定したデータから、Excelを用いて各素子の電圧電流特性のグラフを作成した。
\end{enumerate}

\begin{itemize}
	\item 実験3-1:固定抵抗の電圧電流特性の計測
	      \begin{enumerate}[1)]
		      \item 図\ref{fig:jikken3}の$R_\mathrm{X}$を$1\,\mathrm{k}\Omega$の固定抵抗に変更した。
		      \item 図\ref{fig:jikken3}の$R_0$を$100\,\Omega$、$1\,\mathrm{k}\Omega$、$10\,\mathrm{k}\Omega$、$100\,\mathrm{k}\Omega$の固定抵抗にそれぞれ変更し、各素子について電圧電流特性を計測した。
	      \end{enumerate}

	\item 実験3-2:可変抵抗の電圧電流特性の計測
	      \begin{enumerate}[1)]
		      \item $R_X$を図\ref{fig:teiko}に示す可変抵抗に変更した。このとき、3端子のうち、2端子を使用して計測した。
		            \begin{figure}[H]
			            \centering
			            \includegraphics[keepaspectratio, scale=0.8]{teiko.pdf}
			            \caption{可変抵抗}
			            \label{fig:teiko}
		            \end{figure}
		      \item 図\ref{fig:jikken3}の$R_0$を$100\,\Omega$の抵抗に変更した。
		      \item 電流特性の計測時、図\ref{fig:teiko}の可変抵抗のボリュームのA、B、Cの各箇所において計測した。
		      \item 同様の計測を他の2端子の組み合わせでも行った。
	      \end{enumerate}

	\item 実験3-3:Cdsセンサの電圧電流特性
	      \begin{enumerate}[1)]
		      \item 図\ref{fig:jikken3}の$R_\mathrm{X}$をCdsセンサに変更した。
		      \item 図\ref{fig:jikken3}の$R_0$を$100\,\Omega$の抵抗に変更した。
		      \item 明るい場合と暗い場合の両方で計測を行った。
	      \end{enumerate}

	\item 実験3-4力センサの電圧電流特性
	      \begin{enumerate}[1)]
		      \item 図\ref{fig:jikken3}の$R_\mathrm{X}$を力センサーに変更した。
		      \item 図\ref{fig:jikken3}の$R_0$を$100\,\Omega$の抵抗に変更した。
		      \item センサーに力を加えていない状態と加えた状態の両方で計測を行った。
	      \end{enumerate}

	\item	実験3-5発光ダイオードの電圧電流特性
	      \begin{enumerate}[1)]
		      \item 図\ref{fig:jikken3}の$R_\mathrm{X}$を発光ダイオードに変更した。このとき、素子の極性に注意しなければならない。カソードがGND、アノードがAO0側になるように接続する。
		      \item 図\ref{fig:jikken3}の$R_0$を$100\,\Omega$の抵抗に変更した。
		      \item センサーに力を加えていない状態と加えた状態の両方で計測を行った。
		      \item 白、赤、緑、青色の発光ダイオードについて、それぞれ電圧電流特性を計測した。
	      \end{enumerate}
\end{itemize}
\newpage

\section{結果}
\subsection{実験2-1}
\begin{figure}[H]
	\centering
	\includegraphics[keepaspectratio, scale=0.6]{ex21_2.pdf}\\
	\useMycounter[\label{prog1}]実験2-1のフローチャート
\end{figure}
\begin{figure}[H]
	\centering
	\includegraphics[keepaspectratio, scale=0.6]{ex21_1.pdf}\\
	\useMycounter[\label{kekka1}]実験2-1のフロントパネル
\end{figure}
\begin{table}[H]
	\centering
	\caption{実験2-1の結果}
	\begin{tabular}{lll}
		測定した電圧{[}V{]} & 平均値{[}V{]} & 標準偏差{[}V{]}             \\ \hline \hline
		GND           & 0.004883   & 1.2143$\times 10^{-17}$ \\	\hline
		3.3           & 3.26296342 & 0.00017094              \\ \hline
		5             & 4.998779   & 9.77$\times 10^{-15}$   \\ \hline
	\end{tabular}
\end{table}

\subsubsection{実験2-2}
\begin{figure}[H]
	\centering
	\includegraphics[keepaspectratio, scale=0.7]{ex22_2.pdf}\\
	\useMycounter[\label{prog2}]実験2-2のフローチャート
\end{figure}
\begin{figure}[H]
	\centering
	\includegraphics[keepaspectratio, scale=0.7]{ex21_1.pdf}\\
	\useMycounter[\label{kekka2}]実験2-2のフロントパネル
\end{figure}
\begin{table}[H]
	\centering
	\
	\begin{tabular}{lll}
		出力電圧{[}V{]}                       & 測定電圧{[}V{]} & 出力電圧と測定電圧の差{[}V{]} \\ \hline \hline
		0                                 & 0.007324    & -0.00732           \\	\hline
		0.5                               & 0.499268    & 0.000732           \\	\hline
		1                                 & 0.999756    & 0.000244           \\ \hline
		1.5                               & 1.501465    & -0.00147           \\	\hline
		2                                 & 1.998291    & 0.001709           \\	\hline
		2.5                               & 2.50122     & -0.00122           \\	\hline
		3                                 & 3.001709    & -0.00171           \\	\hline
		3.5                               & 3.499756    & 0.000244           \\	\hline
		4                                 & 4.002685    & -0.00269           \\	\hline
		4.5                               & 4.499511    & 0.000489           \\	\hline
		5                                 & 4.998779    & 0.001221           \\	\hline
		\multicolumn{2}{l}{二乗平均誤差{[}V{]}} & 0.002571                         \\ \hline
	\end{tabular}
\end{table}

\subsection{実験3}
\begin{figure}[H]
	\centering
	\includegraphics[keepaspectratio, scale=0.8]{ex31_2.pdf}\\
	\useMycounter[\label{prog3}]実験3のフローチャート
\end{figure}
\begin{figure}[H]
	\centering
	\includegraphics[keepaspectratio, scale=0.8]{ex31_1.pdf}\\
	\useMycounter[\label{kekka3}]実験3のフロントパネル
\end{figure}
\subsubsection{実験3-1}
\subsubsection{実験3-2}
\subsubsection{実験3-3}
\subsubsection{実験3-4}
\subsubsection{実験3-5}

\section{考察}
\section{結論}

\begin{thebibliography}{9}%参考文献数が10以上の場合は9を99に変更
	%\bibitem{xxx}の引用を本文中で行うには\cite{xxx}と記述。
	\bibitem{a} 著者名, 書名，出版社，発行年．
\end{thebibliography}


\end{document}